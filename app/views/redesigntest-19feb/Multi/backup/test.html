{% extends "layouts/main.html" %}
{% from "components/service-header/macro.njk" import serviceHeader %}

{% set pageName = "Edit page 1 - Apply for a county parish holding number in England" %}
{% set headingPlaceholder = "Page heading" %}
{% set guidancePlaceholder = "" %}

{% block header %}
  {{ serviceHeader({
    organisationName: "Defra",
    productName: "Forms Designer",
    serviceName: "",
    containerClasses: containerClasses,
    accountName: "Chris Smith",
    homepageLink: "/",
    signOutLink: "/onboarding/sign-out-confirmation",
    navigationItems: [
      { href: "/library.html", text: "Forms library", id: "nav-library" },
      { href: "/cph-overview/draft/complete-clean.html", text: "Overview", id: "nav-overview" },
      { href: "/redesigntest/listing", text: "Editor", id: "nav-editor" }    ],
    activeLinkId: "nav-editor"
  }) }}

  <div class="x-govuk-masthead x-govuk-masthead--large">
    <div class="govuk-width-container">
      {{ govukBackLink({
        classes: "govuk-back-link--inverse",
        text: "Back to add and edit pages",
        href: "/september/listing/2.html"
      }) }}

      <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible" style="border-bottom: 1px solid white; margin-bottom: 0" />

      <div class="govuk-grid-row">
        <div class="govuk-grid-column-two-thirds-from-desktop">
          <h1 class="x-govuk-masthead__title">
            <span class="govuk-caption-l" style="color: white">
              Apply for a county parish holding certificate
            </span>
            Edit page 2
          </h1>
          <p class="govuk-body" style="color: white">
            Last saved at <time>5:24pm</time>
          </p>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <div class="govuk-grid-row">
        <!-- Left Column for Form Controls -->
        <div class="govuk-grid-column-one-half-from-desktop" id="container" style="flex: 1 1 75%; overflow-y: auto">
          <div class="govuk-summary-card govuk-!-margin-top-0" style="border-left: 10px solid #008938">
            <div class="govuk-summary-card__content govuk-!-padding-top-0" style="background-color: #f3f2f1">
              <!-- Question Settings Container -->
              <div class="govuk-grid-row" id="page-settings-container-1">
                <div id="question-1">
                  <div class="govuk-summary-card__content" style="margin-bottom: 0">
                    <!-- Sub Navigation for Question -->
                    <nav class="moj-sub-navigation govuk-!-padding-top-0 govuk-!-margin-bottom-2" aria-label="Sub navigation">
                      <ul class="moj-sub-navigation__list" id="nav-list2">
                        <li class="moj-sub-navigation__item">
                          <a class="moj-sub-navigation__link" aria-current="page" href="#question-1">Page settings</a>
                        </li>
                      </ul>
                    </nav>

                    <span class="govuk-caption-l" id="page-caption">Page 2</span>
                    <h2 class="govuk-heading-l" id="page-heading">Page settings</h2>

                    <!-- Default Content for Question 1 -->
                    <div id="question-1-content" class="question-content" style="margin-top: 10px">
                      <!-- Page Heading Input -->
                      {{ govukInput({
                        label: {
                          text: "Page heading",
                          classes: "govuk-label--m govuk-!-margin-top-0",
                          isPageHeading: false
                        },
                        hint: {
                          html: "This should be a statement, not a question. For example, 'Passport information’"
                        },
                        id: "page-heading-input",
                        name: "pageHeading",
                        classes: "govuk-input",
                        describedBy: "page-heading-input-hint",
                        input: {
                          type: "text",
                          id: "page-heading-input"
                        }
                      }) }}

                      <!-- Guidance Text Textarea -->
                      {{ govukTextarea({
                        label: {
                          text: "Guidance text (optional)",
                          classes: "govuk-label--m"
                        },
                        hint: {
                          text: "You can use Markdown if you want to format the content or add links"
                        },
                        id: "guidance-textarea",
                        name: "guidanceText",
                        classes: "govuk-textarea",
                        rows: 3,
                        describedBy: "guidance-textarea-hint"
                      }) }}

                      {% from "govuk/components/radios/macro.njk" import govukRadios %}
                      {% from "govuk/components/input/macro.njk" import govukInput %}

                      {% set morethan1Html %}
                        <div class="govuk-form-group">
                          <fieldset class="govuk-fieldset" role="group" aria-describedby="dob-hint">
                            <legend class="govuk-fieldset__legend govuk-fieldset__legend">
                              <h1 class="govuk-fieldset__heading">Set the minimum and maximum times a user can answer questions</h1>
                            </legend>
                            <div id="dob-hint" class="govuk-hint">The range must be between 2 and 25</div>
                            <div class="govuk-date-input" id="dob">
                              <div class="govuk-date-input__item">
                                <div class="govuk-form-group">
                                  <label class="govuk-label govuk-date-input__label" for="dob-day">Min</label>
                                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="dob-day" name="dob-day" type="text" autocomplete="bday-day" inputmode="numeric">
                                </div>
                              </div>
                              <div class="govuk-date-input__item">
                                <div class="govuk-form-group">
                                  <label class="govuk-label govuk-date-input__label" for="dob-month">Max</label>
                                  <input class="govuk-input govuk-date-input__input govuk-input--width-2" id="dob-month" name="dob-month" type="text" autocomplete="bday-month" inputmode="numeric">
                                </div>
                              </div>
                            </div>
                          </fieldset>
                        </div>

                        {{ govukInput({
                          label: {
                            text: "Give this set of questions a name",
                            classes: "govuk-label",
                            isPageHeading: true
                          },
                          hint: {
                            text: "Use the subject of the questions for the question set name. For example, if the questions are about pets, the question set name might be ‘pet’."
                          },
                          id: "set-name",
                          name: "setName"
                        }) }}
                      {% endset %}

                      {{ govukRadios({
                        name: "responseType",
                        fieldset: {
                          legend: {
                            text: "Do you need users to answer the same question repeatedly?",
                            isPageHeading: true,
                            classes: "govuk-fieldset__legend--m"
                          }
                        },
                        hint: {
                          text: "For example, a microchip number for multiple pets or national grid reference for multiple sites"
                        },
                        items: [
                          {
                            value: "once",
                            text: "No, just once",
                            id: "once"
                          },
                          {
                            value: "morethan1",
                            text: "Yes, more than once",
                            id: "more-than-1",
                            conditional: {
                              html: morethan1Html
                            }
                          }
                        ]
                      }) }}

                      <div class="govuk-button-group">
                        {{ govukButton({
                          text: "Continue",
                          id: "save-changes-button",
                          type: "button"
                        }) }}

                        <p class="govuk-body">
                          <a href="#" class="govuk-link govuk-link--no-visited-state">
                            Delete page
                          </a>
                        </p>
                      </div>
                    </div> <!-- End of question-1-content -->
                  </div>
                </div>
              </div> <!-- End of page-settings-container-1 -->
            </div>
          </div>
        </div>

        <!-- Right Column for Additional Content -->
        <div class="govuk-grid-column-one-half-from-desktop" id="second-container" style="outline: solid 1px #008938; height: 100%; position: sticky; top: 0; padding: 20px; box-shadow: 5px 10px #008938;">
          <!-- New HTML content for before element -->
          <div id="before-content">
            <p class="govuk-body-s" style="margin-bottom: 0">
              <a href="#" class="govuk-link govuk-link--no-visited-state" rel="noreferrer noopener" target="_blank">
                Preview this page in a new tab
              </a>
            </p>
          </div>

          <!-- Additional Content Here -->
          <div class="additional-content">
            <div>
              <!-- Tag for Preview -->
              {{ govukTag({
                text: "Preview of page 2",
                classes: "govuk-tag--yellow govuk-!-margin-bottom-2 govuk-!-margin-top-8"
              }) }}

              <!-- Form for Preview -->
              <form>
                <!-- Dynamic Heading -->
                <div id="heading-container">
                  <span id="dynamic-caption" class="govuk-caption-l"></span>
                  <h1 class="govuk-heading-l" id="dynamic-heading"></h1>
                </div>

                <!-- Guidance Paragraph -->
                <p class="govuk-body" id="guidance-paragraph"></p>
              </form>

              {{ govukButton({
                text: "Continue",
                classes: "govuk-button govuk-!-margin-top-3",
                id: "once-button",
                disabled: true
              }) }}
              {{ govukButton({
                text: "Add another [question set name]",
                classes: "govuk-button govuk-!-margin-top-3",
                id: "add-another-set-button",
                disabled: true,
                attributes: { style: "display:none;" }
              }) }}
            </div>
          </div>
        </div>
      </div>

      <!-- Scripts -->
      <script>
        document.addEventListener("DOMContentLoaded", function () {
          // JavaScript code here
          // Initialize event listeners and functions as needed
        });
      </script>

      <style>
        .highlight {
          background-color: #ffe5cc;
          border-bottom: 2px solid #ffb266;
        }

        #before-content {
          position: absolute;
          top: 0;
          left: 10 !important;
          right: 0;
          width: 100%;
          padding: 10px !important;
          box-sizing: border-box;
          z-index: 1;
          border-bottom: 1px solid #008938;
          padding-left: 10px;
        }

        #second-container {
          padding: 0;
          box-sizing: border-box;
        }

        #second-container > * {
          padding-left: 0px;
          z-index: 2;
        }
      </style>
    </div>
  </div>
{% endblock %}
