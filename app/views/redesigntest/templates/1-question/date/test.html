{% extends "layouts/main.html" %}
{% from "components/service-header/macro.njk" import serviceHeader %}
{% set pageName = "Edit long answer question - Apply for a county parish holding number in England" %}
{% set headingPlaceholder = "Page heading" %}
{% set guidancePlaceholder = "" %}

{% block header %}
{{ serviceHeader({
organisationName: "Defra",
productName: "Forms Designer",
serviceName: "",
containerClasses: containerClasses,
accountName: "Chris Smith",
homepageLink: "/",
signOutLink: "/onboarding/sign-out-confirmation",
navigationItems: [
{ href: "/library.html", text: "Forms library", id: "nav-library" },
{ href: "/cph-overview/draft/complete-clean.html", text: "Overview", id: "nav-overview" },
{ href: "/redesigntest/listing", text: "Editor", id: "nav-editor" } ],
activeLinkId: "nav-editor"
}) }}

<div class="x-govuk-masthead x-govuk-masthead--large">
  <div class="govuk-width-container">
    {{ govukBackLink({ classes: "govuk-back-link--inverse govuk-!-margin-bottom-0", text: "Back to add
    and edit pages", href: "/redesigntest/listing.html" }) }}

    <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible"
      style="border-bottom: 1px solid white; margin-bottom: 0" />

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-full-from-desktop">
        <h1 class="x-govuk-masthead__title">
          {# <span class="govuk-caption-l" style="color: white">
            Apply for a county parish holding certificate
          </span> #}
          Food order form (user research)
        </h1>


      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">
    <div class="govuk-grid-row">
      <!-- Left Column for Form Controls -->
      <div class="govuk-grid-column-one-half-from-desktop" id="container" style="flex: 1 1 75%; overflow-y: auto">
        <div class="govuk-summary-card govuk-!-margin-top-0" style="border-left: 10px solid #008938">
          <div class="govuk-summary-card__content govuk-!-padding-top-0" style="background-color: #f3f2f1">
            <dl class="govuk-summary-list">
              <div class="govuk-summary-list__row">
                <dd class="govuk-summary-list__value">
                  <!-- Dynamic Summary List -->
                  <!-- Question Settings Container -->
                  <div class="govuk-grid-row" id="page-settings-container-1">
                    <div id="question-1">
                      <div class="govuk-summary-card__content" style="margin-bottom: 0">
                        <!-- Sub Navigation for Question -->
                        <nav class="moj-sub-navigation govuk-!-padding-top-0 govuk-!-margin-bottom-2 "
                          aria-label="Sub navigation">
                          <ul class="moj-sub-navigation__list" id="nav-list2">
                            <!-- Question Link -->
                            {# <li class="moj-sub-navigation__item">
                              <a class="moj-sub-navigation__link" href="#question-1">Page settings</a>
                            </li> #}
                            {# <li class="moj-sub-navigation__item">
                              <a class="moj-sub-navigation__link" href="#overview-noquestions">Overview of questions</a>
                            </li> #}
                            <li class="moj-sub-navigation__item">
                              <a class="moj-sub-navigation__link" aria-current="page"
                                href="#question-1-information-type">Page 3</a>
                            </li>
                          </ul>
                        </nav>

                        <div class="govuk-summary-card__title-wrapper govuk-!-padding-top-0"></div>

                        {# <span class="govuk-caption-l">Page 1</span> #}
                        <h2 class="govuk-heading-l">Edit page 3</h2>

                        <form method="post" id="options-form" action="/redesigntest/templates/1-question/date/overview">
                          {% from "govuk/components/input/macro.njk" import govukInput %}

                          <!-- Question Label Input -->
                          <div class="govuk-form-group">
                            <label class="govuk-label govuk-label--m" for="question-label-input-date">
                              Question
                            </label>
                            <input class="govuk-input" id="question-label-input-date" name="questionLabelInputDate"
                              type="text" value="">
                          </div>


                          <!-- Hint Text Input -->
                          {{ govukTextarea({
                          label: {
                          text: "Hint text (optional)",
                          classes: "govuk-label--m"
                          },
                          id: "hint-text-input-date",
                          name: "hintTextInputDate",
                          value: data['hint-text-input-date'],
                          classes: "govuk-textarea",
                          rows: 3,
                          describedBy: "hint-text-input-date"
                          }) }}

                          <!-- Make Optional Checkbox -->
                          <div class="govuk-form-group">
                            <div class="govuk-checkboxes--small">
                              <div class="govuk-checkboxes__item">
                                <input class="govuk-checkboxes__input" id="make-optional" name="makeOptional"
                                  type="checkbox" value="optional">
                                <label class="govuk-label govuk-checkboxes__label" for="make-optional">
                                  Make this question optional
                                </label>
                              </div>
                            </div>
                          </div>

                          <!-- Add guidance above this question -->
                          <details class="govuk-details" data-module="govuk-details">
                            <summary class="govuk-details__summary">
                              <span class="govuk-details__summary-text">
                                Add guidance above this question (optional)
                              </span>
                            </summary>
                            <div class="govuk-details__text">
                              <!-- Default Content for Question 1 -->
                              <div id="question-1-content" class="question-content" style="margin-top: 10px;">

                                <!-- Page Heading Input -->
                                {{ govukInput({
                                label: {
                                text: "Page heading",
                                classes: "govuk-label govuk-label--m govuk-!-margin-top-0"
                                },
                                hint: {
                                text: "Page headings should be a statement and not a question. For example, ‘Passport
                                information’",
                                id: "page-heading-input-hint"
                                },
                                id: "page-heading-input-date",
                                name: "pageHeadingDate",
                                type: "text",
                                attributes: {
                                'aria-describedby': "page-heading-input-hint",
                                'data-preview-target': '#dynamic-heading'
                                }
                                }) }}

                                <!-- Guidance Text Textarea -->
                                {{ govukTextarea({
                                label: {
                                text: "Guidance text (optional)",
                                classes: "govuk-label govuk-label--m"
                                },
                                hint: {
                                text: "Use Markdown to format the content or add hyperlinks",
                                id: "guidance-textarea-hint"
                                },
                                id: "guidance-date",
                                name: "guidanceDate",
                                rows: 5,
                                attributes: {
                                'aria-describedby': "guidance-date-hint",
                                'data-preview-target': '#guidance-paragraph'
                                }
                                }) }}

                              </div>

                              <details class="govuk-details">
                                <summary class="govuk-details__summary">
                                  <span class="govuk-details__summary-text">
                                    Help with markdown
                                  </span>
                                </summary>
                                <div class="govuk-details__text">
                                  <h3 class="govuk-heading-s">Headings and subheadings</h3>
                                  <p class="govuk-body">Use one hash symbol followed by a space for a heading, for
                                    example:</p>
                                  <pre class="formatting-example"
                                    style="background-color: white;"><code class="lang-md"># This is a heading</code></pre>
                                  <p class="bottom-gutter-1-3">To add a subheading, use 2 hash symbols:</p>
                                  <pre class="formatting-example"
                                    style="background-color: white;"><code class="lang-md">## This is a subheading</code></pre>

                                  <h3 class="govuk-heading-s" id="bullets">Bullet points</h3>
                                  <p class="govuk-body">Use bullet points to help words or phrases stand out in your
                                    emails and letters.</p>
                                  <p class="govuk-body">Copy this example to add bullet points:</p>
                                  <pre class="formatting-example" style="background-color: white;"><code class="lang-md">Introduce bullet points with a lead-in line ending in a colon:

* leave one empty line space after the lead-in line
* use an asterisk or a dash followed by a space to add an item
* start each item with a lowercase letter, do not end with a full stop
* leave one empty line space after the last item</code></pre>

                                  <h3 class="govuk-heading-s" id="bullets">Numbered steps</h3>
                                  <p class="govuk-body">Copy this example to add numbered steps:</p>
                                  <pre class="formatting-example" style="background-color: white;"><code class="lang-md">1. Leave one empty line space before starting your list.
2. Enter a number followed by a full stop and a space to add an item.
3. Start each item with a capital letter and end it with a full stop.
4. Leave one empty line space after the last item.</code></pre>

                                  <h3 class="govuk-heading-s">Links and URLs</h3>
                                  <p class="govuk-body">To convert text into a link, use square brackets around the link
                                    text and round brackets around the full URL. Make sure there are no spaces between
                                    the brackets or the link will not work. For example: </p>
                                  <pre class="formatting-example"
                                    style="background-color: white;"><code class="lang-md">[Apply now](https://www.gov.uk/example)</code></pre>

                                </div>
                              </details>
                            </div>
                          </details>





                          {{ govukInput({
                          label: {
                          text: "Short description",
                          classes: "govuk-label--m",
                          isPageHeading: false
                          },
                          hint: {
                          text: "Enter a short description for this question like 'licence period'. Short descriptions
                          are used in error messages and on the check your answers page."
                          },
                          id: "error-message-input-date",
                          name: "errorMessageInputDate"
                          }) }}



                          <!-- Answer Limits -->

                          <!-- Answer Limits -->
                          <details class="govuk-details govuk-!-margin-top-6">
                            <summary class="govuk-details__summary">
                              <span class="govuk-details__summary-text">Set answer limits (optional) </span>
                            </summary>
                            <div class="govuk-details__text">

                              {{ govukInput({
                              label: {
                              text: "Max days in the past",
                              classes: "govuk-label--m",
                              isPageHeading: false
                              },
                              hint: {
                              text: "Determines the earliest date users can enter"
                              },
                              classes: "govuk-input--width-3",

                              id: "max-past",
                              name: "maxPast",
                              inputmode: "numeric",
                              spellcheck: false
                              }) }}

                              {{ govukInput({
                              label: {
                              text: "Max days in the future",
                              classes: "govuk-label--m",
                              isPageHeading: false
                              },
                              hint: {
                              text: "Determines the latest date users can enter"
                              },
                              classes: "govuk-input--width-3",

                              id: "max-future",
                              name: "maxFuture",
                              inputmode: "numeric",
                              spellcheck: false
                              }) }}

                              {{ govukInput({
                              label: {
                              text: "Classes",
                              classes: "govuk-label--m",
                              isPageHeading: false
                              },
                              hint: {
                              text: "Apply CSS classes to this question. For example, ‘govuk-input govuk-!-width-full’
                              "
                              },
                              classes: "govuk-input--width-6",
                              id: "classes-date",
                              name: "classesDate",
                              spellcheck: false
                              }) }}

                            </div>
                          </details>


                          <!-- Section Break -->
                          <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

                          <!-- Question Settings Summary List -->
                          <h2 class="govuk-heading-m">Question settings</h2>

                          {{ govukSummaryList({
                          "rows": [
                          {
                          "key": {
                          "text": "Type of information"
                          },
                          "value": {
                          "html": "Date: day, month and year"
                          },
                          "actions": {
                          "items": [
                          {
                          "href": "/redesigntest/templates/1-question/information-type.html",
                          "text": "Change",
                          "visuallyHiddenText": " type"
                          }
                          ]
                          }
                          }
                          ]
                          }) }}

                          <hr class="govuk-section-break govuk-section-break--m govuk-section-break--visible">

                          <div class="govuk-button-group">


                            {{ govukButton({
                            text: 'Save and Save and continue',
                            type: 'submit'
                            }) }}

                            <button type="submit" class="govuk-button govuk-button--inverse" data-module="govuk-button"
                              style=" gap: 0.2em;">
                              <svg width="1.2em" height="1.2em" viewBox="0 0 22 25" fill="none"
                                xmlns="http://www.w3.org/2000/svg" style="vertical-align: middle;">
                                <g clip-path="url(#clip0_12363_91549)">
                                  <path
                                    d="M16.7917 3.125H2.20833C1.05208 3.125 0.125 4.0625 0.125 5.20833V19.7917C0.125 20.9375 1.05208 21.875 2.20833 21.875H16.7917C17.9375 21.875 18.875 20.9375 18.875 19.7917V5.20833C18.875 4.0625 17.9479 3.125 16.7917 3.125ZM16.7917 19.7917H2.20833V7.29167H16.7917V19.7917ZM11.0625 13.5417C11.0625 14.4062 10.3646 15.1042 9.5 15.1042C8.63542 15.1042 7.9375 14.4062 7.9375 13.5417C7.9375 12.6771 8.63542 11.9792 9.5 11.9792C10.3646 11.9792 11.0625 12.6771 11.0625 13.5417ZM9.5 9.375C6.65625 9.375 4.22917 11.1042 3.25 13.5417C4.22917 15.9792 6.65625 17.7083 9.5 17.7083C12.3438 17.7083 14.7708 15.9792 15.75 13.5417C14.7708 11.1042 12.3438 9.375 9.5 9.375ZM9.5 16.1458C8.0625 16.1458 6.89583 14.9792 6.89583 13.5417C6.89583 12.1042 8.0625 10.9375 9.5 10.9375C10.9375 10.9375 12.1042 12.1042 12.1042 13.5417C12.1042 14.9792 10.9375 16.1458 9.5 16.1458Z"
                                    fill="#1D70B8" />
                                </g>
                                <defs>
                                  <clipPath id="clip0_12363_91549">
                                    <rect width="22" height="25" fill="white" />
                                  </clipPath>
                                </defs>
                              </svg>
                              Save and preview
                            </button>

                          </div>

                        </form>
                      </div>
                    </div>
                  </div>
                </dd>
              </div>
            </dl>
          </div>
        </div>
      </div>

      <!-- Right Column for Preview -->
      <div class="govuk-grid-column-one-half-from-desktop" id="second-container"
        style="outline: solid 1px #008938; height: 100%; position: sticky; top: 0; padding: 20px; box-shadow: 5px 10px #008938;">
        <!-- Before content -->
        <div id="before-content" style=" background-color:  #cce2d8;">
          <p class="govuk-body-s" style="margin-bottom: 0; color: #005a30; padding: 2px 8px 3px;
    text-align: center;"> Previews
          </p>


        </div>

        <div style="margin-top: 60px;">
          <div class="govuk-tabs" data-module="govuk-tabs">
            <h2 class="govuk-tabs__title">
              Contents
            </h2>
            <ul class="govuk-tabs__list">
              <li class="govuk-tabs__list-item govuk-tabs__list-item--selected">
                <a class="govuk-tabs__tab" href="#tab-one">
                  Page preview
                </a>
              </li>
              <li class="govuk-tabs__list-item">
                <a class="govuk-tabs__tab" href="#tab-two">
                  Error messages
                </a>
              </li>
            </ul>
            <div class="govuk-tabs__panel" id="tab-one">
              <!-- Empty content for Tab One -->

              <p class="govuk-body-s" style="margin-bottom: 0; border-bottom: #008938 1px;">
                <a href="#" class="govuk-link govuk-link--no-visited-state" rel="noreferrer noopener"
                  target="_blank">Preview this page in a new tab</a>
              </p>

              {% include "/redesigntest/templates/previews/date/test.html" %}

            </div>
            <div class="govuk-tabs__panel govuk-tabs__panel--hidden" id="tab-two">
              <!-- Empty content for Tab Two -->
            </div>
          </div>
        </div>



        <!-- Include the preview template -->
      </div>

    </div>
  </div>

  <!-- JavaScript code -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // DOM Elements
      const domElements = {
        // Existing elements
        questionLabelInputDate: document.getElementById('question-label-input-date'),
        questionLabelLegend: document.getElementById('question-label-legend'),
        hintTextInputDate: document.getElementById('hint-text-input-date'),
        hintTextOutput: document.getElementById('hint-text-output'),
        makeOptionalCheckbox: document.getElementById('make-optional'),

        // New elements for page heading and guidance text
        pageHeadingInputDate: document.getElementById('page-heading-input-date'),
        dynamicHeading: document.getElementById('dynamic-heading'),
        guidanceDate: document.getElementById('guidance-date'),
        guidanceParagraph: document.getElementById('guidance-paragraph')
      };

      // Initialize event listeners
      initializeEventListeners();

      function initializeEventListeners() {
        // Update question label
        if (domElements.questionLabelInputDate && domElements.questionLabelLegend) {
          domElements.questionLabelInputDate.addEventListener('input', updateQuestionLabel);
        }

        // Update hint text and handle placeholder
        if (domElements.hintTextInputDate && domElements.hintTextOutput) {
          domElements.hintTextInputDate.addEventListener('input', updateHintText);
          domElements.hintTextInputDate.addEventListener('focus', showPlaceholderHint);
          domElements.hintTextInputDate.addEventListener('blur', clearPlaceholderHint);
        }

        // Update page heading and handle placeholder
        if (domElements.pageHeadingInputDate && domElements.dynamicHeading) {
          domElements.pageHeadingInputDate.addEventListener('input', updatePageHeading);
          domElements.pageHeadingInputDate.addEventListener('focus', showPlaceholderHeading);
          domElements.pageHeadingInputDate.addEventListener('blur', clearPlaceholderHeading);
        }

        // Update guidance text and handle placeholder
        if (domElements.guidanceDate && domElements.guidanceParagraph) {
          domElements.guidanceDate.addEventListener('input', updateGuidanceText);
          domElements.guidanceDate.addEventListener('focus', showPlaceholderGuidance);
          domElements.guidanceDate.addEventListener('blur', clearPlaceholderGuidance);
        }

        // Apply focus/blur highlighting
        applyHighlightOnFocus(domElements.questionLabelInputDate, domElements.questionLabelLegend);
        applyHighlightOnFocus(domElements.hintTextInputDate, domElements.hintTextOutput);
        applyHighlightOnFocus(domElements.pageHeadingInputDate, domElements.dynamicHeading);
        applyHighlightOnFocus(domElements.guidanceDate, domElements.guidanceParagraph);
      }

      function updateQuestionLabel() {
        const suffix = domElements.makeOptionalCheckbox.checked ? ' (optional)' : '';
        domElements.questionLabelLegend.textContent = domElements.questionLabelInputDate.value || 'Question';
        domElements.questionLabelLegend.textContent += suffix;
      }

      function updateHintText() {
        domElements.hintTextOutput.textContent = domElements.hintTextInputDate.value;
      }

      function updatePageHeading() {
        domElements.dynamicHeading.textContent = domElements.pageHeadingInputDate.value;
      }

      function updateGuidanceText() {
        domElements.guidanceParagraph.textContent = domElements.guidanceDate.value;
      }

      function applyHighlightOnFocus(inputElement, targetElement) {
        if (inputElement && targetElement) {
          inputElement.addEventListener('focus', function () {
            targetElement.classList.add('highlight');
          });
          inputElement.addEventListener('blur', function () {
            targetElement.classList.remove('highlight');
          });

          // If the input is already focused
          if (document.activeElement === inputElement) {
            targetElement.classList.add('highlight');
          }
        }
      }

      // Placeholder handling for hint text
      function showPlaceholderHint() {
        if (!domElements.hintTextInputDate.value) {
          domElements.hintTextOutput.textContent = 'Hint text';
        }
      }

      function clearPlaceholderHint() {
        if (!domElements.hintTextInputDate.value) {
          domElements.hintTextOutput.textContent = '';
        }
      }

      // Placeholder handling for page heading
      function showPlaceholderHeading() {
        if (!domElements.pageHeadingInputDate.value) {
          domElements.dynamicHeading.textContent = 'Page heading';
        }
      }

      function clearPlaceholderHeading() {
        if (!domElements.pageHeadingInputDate.value) {
          domElements.dynamicHeading.textContent = '';
        }
      }

      // Placeholder handling for guidance text
      function showPlaceholderGuidance() {
        if (!domElements.guidanceDate.value) {
          domElements.guidanceParagraph.textContent = 'Guidance text';
        }
      }

      function clearPlaceholderGuidance() {
        if (!domElements.guidanceDate.value) {
          domElements.guidanceParagraph.textContent = '';
        }
      }
    });
  </script>



  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const errorMessageInputDate = document.getElementById('error-message-input-date');
      const errorMessagePreviewSummary = document.getElementById('error-message-preview-summary');

      if (errorMessageInputDate && errorMessagePreviewSummary) {
        // Open details when input is focused
        errorMessageInputDate.addEventListener('focus', function () {
          errorMessagePreviewSummary.setAttribute('open', 'open');
        });

        // Close details when input loses focus
        errorMessageInputDate.addEventListener('blur', function () {
          errorMessagePreviewSummary.removeAttribute('open');
        });
      }
    });

  </script>



  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // DOM Elements
      const domElements = {
        multiQuestionLabelInputDate: document.getElementById('multi-question-label-input-date'),
        errorMessageInputDate: document.getElementById('error-message-input-date'),
        errorMessagePreviewElements: document.querySelectorAll("#error-dynamic-text, #error-dynamic-text-long, #error-dynamic-text-short, #error-dynamic-text-range"),
        makeOptionalCheckbox: document.getElementById('make-optional'),
        maxPastInput: document.getElementById('max-past'),
        maxCharactersInput: document.getElementById('max-characters'),
        minCharactersPreview: document.querySelectorAll("#min-characters, #min-length, #min-length-range"),
        maxCharactersPreview: document.querySelectorAll("#max-characters, #max-length, #max-length-range"),
        errorMessagePreviewSummary: document.getElementById('error-message-preview-summary') // Add the details component
      };

      // Initialize event listeners
      initializeEventListeners();

      function initializeEventListeners() {
        // Update short description and apply highlighting
        if (domElements.errorMessageInputDate && domElements.errorMessagePreviewElements.length) {
          domElements.errorMessageInputDate.addEventListener('input', updateErrorMessages);
          applyHighlightOnFocus(domElements.errorMessageInputDate, domElements.errorMessagePreviewElements);

          // Activate the details component on focus and deactivate on blur
          domElements.errorMessageInputDate.addEventListener('focus', openErrorMessagePreview);
          domElements.errorMessageInputDate.addEventListener('blur', closeErrorMessagePreview);
        }

        // Apply focus/blur highlighting to other elements
        applyHighlightOnFocus(domElements.multiQuestionLabelInputTextarea, document.getElementById('question-label-legend'));

        // Update character limits dynamically
        if (domElements.minCharactersInput && domElements.maxCharactersInput) {
          domElements.minCharactersInput.addEventListener('input', updateCharacterLimits);
          domElements.maxCharactersInput.addEventListener('input', updateCharacterLimits);
        }
      }

      function updateErrorMessages() {
        const shortDescription = domElements.errorMessageInputDate.value || '[Short description]';
        domElements.errorMessagePreviewElements.forEach(element => {
          element.textContent = shortDescription;
        });
      }

      function updateCharacterLimits() {
        const minCharacters = domElements.minCharactersInput.value || '[min length]';
        const maxCharacters = domElements.maxCharactersInput.value || '[max length]';

        domElements.minCharactersPreview.forEach(element => {
          element.textContent = minCharacters;
        });

        domElements.maxCharactersPreview.forEach(element => {
          element.textContent = maxCharacters;
        });
      }

      function applyHighlightOnFocus(inputElement, targetElements) {
        if (inputElement && targetElements) {
          inputElement.addEventListener('focus', function () {
            targetElements.forEach(target => target.classList.add('highlight'));
          });
          inputElement.addEventListener('blur', function () {
            targetElements.forEach(target => target.classList.remove('highlight'));
          });

          // If the input is already focused, apply the highlight immediately
          if (document.activeElement === inputElement) {
            targetElements.forEach(target => target.classList.add('highlight'));
          }
        }
      }

      // Function to open the details component when the input is focused
      function openErrorMessagePreview() {
        if (domElements.errorMessagePreviewSummary) {
          domElements.errorMessagePreviewSummary.setAttribute('open', 'open'); // Opens the details component
        }
      }

      // Function to close the details component when the input loses focus
      function closeErrorMessagePreview() {
        if (domElements.errorMessagePreviewSummary) {
          domElements.errorMessagePreviewSummary.removeAttribute('open'); // Closes the details component
        }
      }
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // Get the input field
      const inputField = document.getElementById('error-message-input-date');

      // Check if input field exists
      if (!inputField) {
        console.error('Input field not found.');
        return;
      }

      // Get the error message placeholders
      const errorDynamicTextElements = {
        asIs: document.querySelectorAll('#error-dynamic-text'), // Use input as-is for multiple spans
        capitalize: [
          document.getElementById('error-dynamic-text-long'),
          document.getElementById('error-dynamic-text-short')
        ].filter(Boolean) // Apply capitalizeFirstLetter to specific spans
      };

      // Function to capitalize only the first letter of the input
      function capitalizeFirstLetter(str) {
        if (!str) return '[Short description]';
        return str.charAt(0).toUpperCase() + str.slice(1);
      }

      // Function to update error messages
      function updateErrorMessages() {
        const userInput = inputField.value.trim() || '[Short description]';

        // For the error message spans where we use input as-is
        errorDynamicTextElements.asIs.forEach(function (element) {
          element.textContent = userInput;
        });

        // For the error message spans where we capitalize the first letter
        const transformedInput = capitalizeFirstLetter(userInput);
        errorDynamicTextElements.capitalize.forEach(function (element) {
          element.textContent = transformedInput;
        });
      }

      // Add event listener to the input field
      inputField.addEventListener('input', updateErrorMessages);

      // Initialize error messages on page load
      updateErrorMessages();
    });
  </script>


  <!-- CSS for Highlighting -->
  <style>
    .highlight {
      background-color: #ffe5cc;
      border-bottom: 2px solid #ffb266;
      color: black;
    }

    #before-content {
      position: absolute;
      top: 0;
      left: 10 !important;
      right: 0;
      width: 100%;
      padding: 10px !important;
      box-sizing: border-box;
      z-index: 1;
      border-bottom: 1px solid #008938;
      padding-left: 10px;
    }

    #second-container {
      padding: 0;
      box-sizing: border-box;
    }

    #second-container>* {
      padding-left: 0px;
      z-index: 2;
    }
  </style>
</div>
</div>
{% endblock %}